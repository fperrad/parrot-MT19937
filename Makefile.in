# Copyright (C) 2009, Parrot Foundation.

## arguments we want to run parrot with
PARROT_ARGS   :=

## configuration settings
VERSION       := @versiondir@
BIN_DIR       := @bindir@
LIB_DIR       := @libdir@$(VERSION)

## Setup some commands
PERL          := @perl@
CP            := @cp@
MKPATH        := @mkpath@
RM_F          := @rm_f@
PARROT        := $(BIN_DIR)/parrot@exe@

# the default target
all: Math/Random/mt19937ar.pbc

Math/Random/mt19937ar.pbc: Math/Random/mt19937ar.pir
	$(PARROT) $(PARROT_ARGS) -o Math/Random/mt19937ar.pbc Math/Random/mt19937ar.pir

Makefile: Makefile.in
	$(PARROT) Configure.pir

# This is a listing of all targets, that are meant to be called by users
help:
	@echo ""
	@echo "Following targets are available for the user:"
	@echo ""
	@echo "  all:               mt19937ar.pbc"
	@echo "                     This is the default."
	@echo "  install:           Install the library."
	@echo ""
	@echo "Testing:"
	@echo "  test:              Run the test suite."
	@echo "  testclean:         Clean up test results."
	@echo ""
	@echo "Cleaning:"
	@echo "  clean:             Basic cleaning up."
	@echo "  realclean:         Removes also files generated by 'Configure.pir'"
	@echo ""
	@echo "Misc:"
	@echo "  help:              Print this help message."
	@echo ""

test: all
	prove --exec=$(PARROT) t//*.t

install: all
	-$(MKPATH) $(LIB_DIR)/library/Math/Random
	$(CP) Math/Random/mt19937ar.pbc $(LIB_DIR)/library/Math/Random/mt19937ar.pbc

uninstall:
	$(RM_F) $(LIB_DIR)/library/Math/Random/mt19937ar.pbc

testclean:

clean:
	$(RM_F) Math/Random/mt19937ar.pbc

realclean: clean
	$(RM_F) Makefile


# Local variables:
#   mode: makefile
# End:
# vim: ft=make:

